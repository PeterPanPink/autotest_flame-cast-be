# ================================================================================
# Pytest Configuration
# ================================================================================
#
# This file configures pytest for the automated testing framework.
# It defines markers, default options, and test discovery patterns.
#
# ================================================================================

[pytest]
# ============================================================
# Test Discovery
# ============================================================
testpaths = testsuites
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# ============================================================
# Default Options
# ============================================================
addopts = 
    -v
    --tb=short
    --strict-markers
    -ra
    --alluredir=reports/allure-results

# ============================================================
# Logging Configuration
# ============================================================
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s | %(levelname)-8s | %(name)s:%(funcName)s:%(lineno)d | %(message)s
log_cli_date_format = %H:%M:%S

# ============================================================
# Markers
# ============================================================
markers =
    # Priority markers
    P0: Critical test cases (smoke, core functionality) - must pass before merge
    P1: Important test cases (main features) - should pass for release
    P2: Extended test cases (edge cases, less critical) - nice to have
    P3: Low priority test cases (exploratory, future features)
    
    # Type markers - API
    smoke: Smoke test cases for quick validation
    regression: Regression test cases for comprehensive coverage
    integration: Integration test cases
    mutations: Mutation/negative test cases for parameter validation
    e2e: End-to-end test cases
    
    # Type markers - UI
    smoke_ui: UI smoke test cases
    regression_ui: UI regression test cases
    e2e_ui: End-to-end UI test cases
    P0_UI: Critical UI test cases
    P1_UI: Important UI test cases
    P2_UI: Extended UI test cases
    
    # Feature markers
    auth: Authentication related tests
    channel: Channel management tests
    session: Session management tests
    streaming: Streaming functionality tests
    
    # Execution markers
    slow: Slow running tests (may be skipped in quick runs)
    flaky: Known flaky tests (may need investigation)
    skip_ci: Tests to skip in CI environment

# ============================================================
# Timeout Configuration
# ============================================================
timeout = 300
timeout_method = signal

# ============================================================
# Async Configuration
# ============================================================
asyncio_mode = auto

# ============================================================
# Filter Warnings
# ============================================================
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

